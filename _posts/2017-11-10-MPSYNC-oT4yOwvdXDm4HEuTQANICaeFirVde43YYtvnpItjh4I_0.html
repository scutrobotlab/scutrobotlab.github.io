---
categories: [新闻]
date: 2017-11-10 21:52:49 +0800
desc: 厌倦了食堂色彩斑斓的山珍海味，最怀念还是家乡那一碗黑白的芝麻杏仁糊。
layout: mp-sync
slug: 视觉入门之图像二值化：你说的黑不是黑，你说的白是什么白？
tags: [微信公众号文章]
title: 视觉入门之图像二值化：你说的黑不是黑，你说的白是什么白？
...

<p style="margin-top: 10px;text-align: center;margin-bottom: 25px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;"><img data-src="/static/assets/img/mp-sync/uia5dweZ372LocjVclKdf4WEw3g5Doy9OOJz7ia7LjZhOyQtTm6yguIYMJAKXicZBxeKSx0iamaTOoNHPKUgdTjfew.gif" data-type="gif" class="" data-ratio="0.18683001531393567" data-w="653"></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;font-family: 宋体;">传统的机器视觉通常包括两个步骤——预处理和物体检测。而沟通二者的桥梁则是</span><span style="letter-spacing: 1px;font-size: 15px;font-family: 宋体;"><strong><span style="color: rgb(31, 78, 121);">图像分割（Image Segmentation</span></strong><strong><span style="color: rgb(31, 78, 121);">）</span></strong></span><span style="font-size: 15px;">[1]<span style="font-family: 宋体;">。图像分割通过简化或改变图像的表示形式，使得图像更易于分析。</span></span><br></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">举个例子，食品加工厂新进了一批肉鸡，想通过视觉检测其美味程度。机器在预处理优化完图像之后，要先把图像中的鸡肉和背景分开，并对感兴趣的区域单独进行分析，才能做出快速准确的判断。</span></p><p style="margin-top: 10px;text-align: center;line-height: normal;margin-bottom: 5px;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372Krw8pUcF1r5RyqV9o9kxj4ZrBUQ7hOFdiaHeibOcwZrlJvibAuAqz5iaVwLLZmIFs5RbB7qvh526WNTQ.gif" data-copyright="0" class="" data-ratio="0.5587828492392808" data-w="723"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">食品加工厂的视觉处理</span></p><p style="margin-bottom: 15px;margin-top: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">然而，图像分割对愚蠢的</span>AI<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">来说并不容易。聪明的人类一眼就能看出下图中哪些东西能吃、哪些不能吃。但计算机要把这些东西分开却得花费一番功夫。</span></span></p><p style="margin-top: 10px;text-align: center;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXv8EiaGCClnUiaHFsbOMZ7yLEhwIlec2fV3BmDBg7y7aNW7b73TxCou7A.jpg" data-copyright="0" class="" data-ratio="0.66640625" data-w="1280"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="color: rgb(136, 136, 136);font-family: 宋体;font-size: 14px;letter-spacing: 1px;">原图</span></p><p style="text-align: center;margin-top: 15px;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIX4QozZskYSRDBExTK8zBWJsZ6SgawdukWGSfZT5glDDReFvVN1CEu9w.jpg" data-copyright="0" style="" class="" data-ratio="0.66640625" data-w="1280"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="color: rgb(136, 136, 136);font-family: 宋体;font-size: 14px;letter-spacing: 1px;">图像分割结果</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">最简单的图像分割方法是<strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">二值化（Binarization）</span></strong>。二值图像每个像素只有两种取值：要么纯黑，要么纯白。</span></p><p style="margin-top: 10px;text-align: center;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXBmrE2jlFPHOMAFsuytQqVA7MU52ZcHHhFh2zoNDrxYUaLKb5pzoygA.jpg" data-copyright="0" class="" data-ratio="0.5622222222222222" data-w="900"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">彩色图、灰度图、二值图对比</span></p><p style="text-align: left;margin-bottom: 10px;margin-top: 10px;line-height: 1.75em;"><span style="letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">由于二值图像数据足够简单，许多视觉算法都依赖二值图像。通过二值图像，能更好地分析物体的形状和轮廓。二值图像也常常用作原始图像的<strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">掩模（又称遮罩、蒙版，Mask）</span></strong><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;color: rgb(0, 0, 0);">：</span>它就像一张部分镂空的纸，把我们不感兴趣的区域遮掉。进行二值化有多种方式，其中最常用的就是采用<strong><span style="letter-spacing: 1px;color: rgb(31, 78, 121);">阈值法（</span></strong></span><strong style="font-size: 15px;"><span style="letter-spacing: 1px;color: rgb(31, 78, 121);">Thresholding</span></strong><strong style="font-size: 15px;"><span style="letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">）</span></strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">进行二值化。</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">在计算机视觉里，一般用矩阵来表示图像。也就是说，无论你的图片看上去多么好吃，对计算机来说都不过是个矩阵而已。</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">在这个矩阵里，每一个像素就是矩阵中的一个元素。在三通道的彩色图像中，这个元素是由三个数字组成的元组。</span></p><p style="margin-top: 10px;text-align: center;line-height: normal;margin-bottom: 5px;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXAkiaO0Wbqic5kZKzxGicQiaSLnx9SqmWqM59RXKXHk2SoEXibqPGwoqbs1g.gif" data-copyright="0" class="" data-ratio="0.6077097505668935" data-w="441" style="text-align: center;"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">彩色三通道图像</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">而对于单通道的灰度图像来说，这个元素就是一个数字。这个数字代表了图像在这个点的亮度，数字越大像素点也就越亮，在常见的八位单通道色彩空间中，</span>0<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">代表全黑，</span>255<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">代表全白。</span></span></p><p style="text-align: center;margin-top: 10px;line-height: normal;margin-bottom: 5px;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXF7CLmelhiciaO5XJbRYxUXffAB2JdibH7Q2ETjt4X9aibMibJkqI14IcSrQ.gif" data-copyright="0" style="" class="" data-ratio="0.7925170068027211" data-w="294"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">单通道的灰度图</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">阈值法是指选取一个数字，大于它就视为全白，小于它就视为全黑。就像教室里的灯管开关，我们轻轻地推动它，如果突然间超过了某个阈值，灯就啪的一声亮了。</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"> </span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">根据阈值选取方式的不同，可以分为全局阈值和局部阈值。</span></p><section style="background-color: rgb(255, 255, 255);box-sizing: border-box;"><section class="Powered-by-XIUMI V5" style="box-sizing: border-box;text-align: center;" powered-by="xiumi.us"><p style="margin-top: 0.5em;margin-bottom: 0.5em;text-align: center;box-sizing: border-box;line-height: 1.75em;"><br></p><section class="" style="display: inline-block;box-sizing: border-box;"><section class="" style="border-bottom: 1px solid rgb(160, 160, 160);display: inline-block;padding-right: 0.8em;padding-left: 0.8em;font-size: 28px;box-sizing: border-box;"><p style="box-sizing: border-box;"><span style="letter-spacing: 1px;">全局阈值</span></p></section><section class="" style="margin-top: 5px;box-sizing: border-box;"><p style="box-sizing: border-box;"><span style="letter-spacing: 1px;">Global Method</span></p></section></section><p><br></p></section></section><p style="margin-top: 10px;line-height: 1.75em;margin-bottom: 15px;"><span style="letter-spacing: 1px;"><span style="letter-spacing: 1px;font-size: 15px;"><span style="letter-spacing: 1px;font-family: 宋体;">全局阈值，指的是对整个图像中的每一个像素都选用相同的阈值。我们可以在</span>Photoshop<span style="letter-spacing: 1px;font-family: 宋体;">的</span></span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">图像-调整-阈值</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">里体验这一操作：</span></span></p><p style="margin-top: 10px;margin-bottom: 5px;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372Krw8pUcF1r5RyqV9o9kxj4WqRb1TwOku6KDTWbgMJ6aT8epakEIz0be5bmD2PNhfk9WUkFu3ly0A.jpg" data-copyright="0" class="" data-ratio="0.5551694178974804" data-w="1151"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">Photoshop里的阈值</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">可以看到阈值色阶从</span><span style="font-size: 15px;letter-spacing: 1px;">1</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">到</span><span style="font-size: 15px;letter-spacing: 1px;">255</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">的移动过程中，图像变黑的区域越来越多。当阈值数字在某个特定范围内的时候，红米肠的轮廓清晰可辨。</span></p><p style="text-align: center;margin-bottom: 5px;line-height: normal;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372Krw8pUcF1r5RyqV9o9kxj42mrZpXAuxYib0Js9ickVO9MicbbweofKsgiaWAgJUY0ydDiaVO0lL2Sc3icQ.gif" data-copyright="0" style="" class="" data-ratio="0.5555555555555556" data-w="900"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">正确的二值化使红米肠轮廓清晰可辨</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">在生产线环境下，光照是已知的，常常会设定一个固定的数字来作为全局阈值。但是在室外或者机器人比赛中，光照条件往往更加复杂*。</span></p><p style="margin-top: 10px;text-align: center;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXmRNA6xhjH1UBfC0HiayDYc07QG708rRuuPDpJJjMnYJ0tqbW1QuNoSA.jpg" data-copyright="0" class="" data-ratio="0.66640625" data-w="1280"></p><p style="text-align: center;line-height: normal;margin-bottom: 20px;margin-top: 5px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">RoboMaster赛场的绚丽灯光</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 20px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-family: 宋体;font-size: 14px;color: rgb(136, 136, 136);">*此图采用了夸张手法，RoboMaster是个很正规的比赛，绝对不会在比赛的时候这么难为大家的。</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">同样是奥利奥冰激凌，在白天和晚上，摄像头看到的画面可能不太一样，常数阈值无法同时适应这两种情况。</span></p><p style="margin-top: 10px;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXPvvic3s3lwUibpGJfTJrypTuXuK4LicefScyDrEbiajkSw5vU1cZXTmWaQ.jpg" data-copyright="0" style="" class="" data-ratio="0.28225806451612906" data-w="992"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">明暗不同的画面</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">对于画面比较暗的晚上，我们需要一个比较低的阈值，比如说设定阈值为</span><span style="font-size: 15px;letter-spacing: 1px;">50</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">，它在晚上能很清楚地把黑白两种颜色分开，但是到了白天就是一片白（左边）；如果我们把阈值设置得比较高，比如说</span><span style="font-size: 15px;letter-spacing: 1px;">172</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">，在白天能顺利分割，但在晚上就是一片黑（右边）。我们需要能够适应复杂环境的算法。</span></p><p style="margin-top: 10px;line-height: normal;margin-bottom: 5px;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXibGQLcqpuESDZKeycGRNicaWnIrJzJHsOYcmuxhso3L7DibvS66z6tgJQ.jpg" data-copyright="0" style="" class="" data-ratio="0.37734375" data-w="1280"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">左边阈值=50，右边阈值=172</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">其实，稍作分析我们可以发现，这张图像中的颜色差异还是比较明显的，只有深浅两种颜色。因此，无论是在白天还是黑夜，它的色阶直方图都应该是两个明显的波峰，分别代表深色和浅色的区域。只是色阶直方图在白天会整体向右偏移，而在夜晚整体向左偏移。</span></p><p style="margin-top: 10px;margin-bottom: 5px;text-align: center;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXYricfZPodicwsicVIxErPRD1wdHk3jZLQamA05tAzuRDaeTXbK3WKFGmw.jpg" data-copyright="0" style="" class="" data-ratio="0.5120689655172413" data-w="580"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="color: rgb(136, 136, 136);font-family: 宋体;font-size: 14px;text-align: center;letter-spacing: 1px;">图像的色阶直方图</span></p><p style="line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">如果选择两个波峰之间的波谷作为阈值，就能轻松地把这两类像素分开。但是图像的直方图往往是不连续的，有非常多尖峰和抖动，要找到准确的极值点十分困难。</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">日本工程师大津展之为这个波谷找到<span style="font-size: 15px;font-family: 宋体;letter-spacing: 1px;"></span>了一个合适的数学表达，并于</span>1979<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">年发表</span>[2]<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">。这个二值化方法称为<strong><span style="font-size: 15px;letter-spacing: 1px;color: rgb(31, 78, 121);">大津算法（</span></strong></span><strong><span style="font-size: 15px;letter-spacing: 1px;color: rgb(31, 78, 121);">Otsu’s method</span></strong><strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">）</span></strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">。大津算法类似于一维</span>Fisher<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">判别分析的离散化模拟。通过穷举法找到一个阈值数字，把这些像素切成两类，使得这两类像素的亮度的类内方差最小。类内方差指的是两类像素的方差的加权和，这里权指的是这类像素点数量占整个图像像素点数量的比值。</span></span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">也许你的画面不会只有两坨差异较大的颜色，比如这款雪糕的就有三个尖峰。</span></p><p style="margin-top: 10px;margin-bottom: 5px;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXUQLiaqhyrQw1b6lbZtSvGOqTKAAuAuWmcEhMnxYW4wsvMgia7pnUvm3Q.jpg" data-copyright="0" class="" data-ratio="0.5555555555555556" data-w="1008"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">三色雪糕（取雪糕部位的直方图）</span></p><p style="text-align: left;margin-bottom: 15px;margin-top: 5px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">这时候，只需对大津算法稍加扩展也可以完成。对大津算法的多级推广成为<strong><span style="color: rgb(31, 78, 121);">多大津算法（</span></strong></span><strong style="font-size: 15px;letter-spacing: 1px;"><span style="color: rgb(31, 78, 121);">multi Otsu method</span></strong><strong style="font-size: 15px;letter-spacing: 1px;"><span style="font-family: 宋体;color: rgb(31, 78, 121);">）</span></strong><span style="font-size: 15px;letter-spacing: 1px;">[3]</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">。</span></p><section style="background-color: rgb(255, 255, 255);box-sizing: border-box;"><section class="Powered-by-XIUMI V5" style="box-sizing: border-box;text-align: center;" powered-by="xiumi.us"><p style="margin-top: 0.5em;margin-bottom: 0.5em;text-align: center;box-sizing: border-box;line-height: 1.75em;"><br></p><section class="" style="display: inline-block;box-sizing: border-box;"><section class="" style="border-bottom: 1px solid rgb(160, 160, 160);display: inline-block;padding-right: 0.8em;padding-left: 0.8em;font-size: 28px;box-sizing: border-box;"><p style="box-sizing: border-box;"><span style="letter-spacing: 1px;">局部阈值*</span></p></section><section class="" style="margin-top: 5px;box-sizing: border-box;"><p style="box-sizing: border-box;"><span style="letter-spacing: 1px;">Local Method</span></p><p style="box-sizing: border-box;margin-top: 5px;margin-bottom: 10px;line-height: normal;"><span style="letter-spacing: 1px;color: rgb(136, 136, 136);font-family: 宋体;font-size: 14px;">*又称自适应阈值，Adaptive Thresholding</span></p></section></section><p><br></p></section></section><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">比赛中常常会有聚光灯照在一个特定区域，产生局部受光、局部不受光的画面。</span></p><p style="margin-top: 10px;margin-bottom: 5px;line-height: normal;text-align: center;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXOGnzjC1OPWL50IQqcqdyl57dEibzlNdz3LjIteViaEr6ksxftpy7PUlg.jpg" data-copyright="0" style="" class="" data-ratio="0.7222222222222222" data-w="612"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">局部受光的图像</span></p><p style="text-align: left;margin-top: 5px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">对于局部受光的图像进行全局阈值，可能会出现“无论设置什么阈值参数，都无法满足全图要求”的尴尬。比如上面这幅图像，直接进行全局阈值时，左上半边的寿司全都显露出来时，右下半边还是一片黑色。</span></p><p style="margin-top: 10px;margin-bottom: 5px;line-height: normal;text-align: center;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIX8JliazJ0etibzcKMMqM1ah7IUVHLpicXficeLibDfX38qhrGr7QaBS2lMbg.jpg" data-copyright="0" style="" class="" data-ratio="0.7222222222222222" data-w="612"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">局部受光图像的全局阈值处理</span></p><p style="text-align: left;line-height: 1.75em;margin-top: 5px;margin-bottom: 10px;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">这个时候我们就要用到局部阈值来处理了。其实，人的眼睛也是自带了这一步操作的。我们判定一个东西颜色深浅，往往会受到物体周边的颜色影响，这也就是为什么黑人的牙齿看上去更白。</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">局部阈值法假定图像在一定区域内受到的光照比较接近。它用一个滑窗扫描图像，并取<strong><span style="font-size: 15px;letter-spacing: 1px;color: red;">滑窗中心点</span></strong>亮度与<strong><span style="font-size: 15px;letter-spacing: 1px;color: rgb(191, 143, 0);">滑窗内其他区域（称为邻域</span></strong></span><strong><span style="font-size: 15px;letter-spacing: 1px;color: rgb(191, 143, 0);">, neighborhood area</span></strong><strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(191, 143, 0);">）</span></strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">的亮度进行比较。如果<strong><span style="font-size: 15px;letter-spacing: 1px;color: red;">中心点</span></strong>亮度高于<strong><span style="font-size: 15px;letter-spacing: 1px;color: rgb(191, 143, 0);">邻域</span></strong>亮度*，则将<strong><span style="font-size: 15px;letter-spacing: 1px;color: red;">中心点</span></strong>标记为白色，否则标记为黑色。</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;text-align: center;line-height: normal;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXFCukaricJy49rZRcjrFQUl1cyiayv7kCahiaKV7ibs9oJNKoFHdiaU6sKAA.gif" data-copyright="0" class="" data-ratio="0.726" data-w="500" style="text-align: center;"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">局部阈值的滑窗</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"> </span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 14px;letter-spacing: 1px;"><span style="font-size: 14px;letter-spacing: 1px;color: gray;">*</span><span style="font-size: 14px;letter-spacing: 1px;font-family: 宋体;color: gray;">这里提到的是局部阈值的基本方法，对于实际使用中常见的其他局部阈值方法，请参阅</span><span style="font-size: 14px;letter-spacing: 1px;color: gray;">Chow-Kaneko</span><span style="font-size: 14px;letter-spacing: 1px;font-family: 宋体;color: gray;">自适应阈值法</span><span style="font-size: 14px;letter-spacing: 1px;color: gray;"> [4]</span><span style="font-size: 14px;letter-spacing: 1px;font-family: 宋体;color: gray;">。</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"> </span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">局部阈值的应用非常广泛，特别是对白纸黑字的处理非常有效。光学字符识别（</span>OCR<span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">）和二维码扫描的算法中，很多都用了局部阈值操作。</span></span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">比如下面这张二维码就是一张典型的局部受光图像：</span></p><p style="margin-top: 10px;margin-bottom: 10px;text-align: center;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXAcgGAlsfUXxshW4rgv61f2g0BaH6MI7UbqwPgMrLpUWAbfZ3HcYsKg.jpg" data-copyright="0" class="" data-ratio="0.5546875" data-w="1280"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">扫扫看，局部受光的二维码</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">如果对这张图片采用全局阈值（例如下图采用大津算法进行分割），是无论如何都无法正确分割的。</span></p><p style="margin-top: 10px;margin-bottom: 10px;text-align: center;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXM3fsk8u0U8YDsI0zxCPJUtSdsibBK6Uhn33yCzqTtKlHoH8ArnQSaow.jpg" data-copyright="0" class="" data-ratio="0.555878084179971" data-w="689"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">全局方法不能处理局部受光图像</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;">而采用局部阈值方法就能很好地分割图像。从图片里可以明显观察到，局部阈值方法对于一大片干净区域的细节比较敏感，所以纸面上多出了很多我们原本注意不到的斑点。</span></p><p style="margin-top: 10px;margin-bottom: 10px;text-align: center;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXhFZeS6uwbbtakfR9ZYcUzOW1zjpZD0B4r0fchdd2FjoIbyJsCqZZow.jpg" data-copyright="0" class="" data-ratio="0.555878084179971" data-w="689"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">局部方法分割二维码</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"> </span></p><p style="text-align: center;margin-top: 25px;margin-bottom: 25px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><strong><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: rgb(31, 78, 121);">◆◆◆</span></strong></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"> </span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">实际运用中，我们要根据需求选择不同的二值化方法，没有哪个方法是绝对完美的。</span></p><p style="margin-top: 10px;line-height: 1.75em;margin-bottom: 15px;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">例如，在识别敌方机器人时，由于装甲片灯条是自发光物体，受环境光影响较小，为了提高程序运行效率，我们采用固定数字作为全局阈值：</span></p><p style="margin-top: 10px;line-height: 1.75em;margin-bottom: 5px;"><img data-type="gif" data-src="/static/assets/img/mp-sync/uia5dweZ372Krw8pUcF1r5RyqV9o9kxj4dp28o7G5ViaoycEkay48P8YicVPGS9bvhzyz3Iy5nBYibticjAMEqX7X5w.gif" data-copyright="0" class="" data-ratio="0.5555555555555556" data-w="720"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="color: rgb(136, 136, 136);font-family: 宋体;font-size: 14px;text-align: center;letter-spacing: 1px;">基地自动反击</span></p><p style="text-align: left;margin-bottom: 10px;margin-top: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">在能量机关的识别中，由于能量机关只有黑白两种颜色，我们采用了大津算法及其多种变体：</span></p><p style="text-align: center;margin-top: 10px;margin-bottom: 5px;line-height: normal;"><img data-s="300,640" data-type="png" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXzN7oobLI6GWMawe1PkkqpaYOLf5L2gibmdjaxHRicibI1cBUT8HzRIGMg.png" data-copyright="0" style="" class="" data-ratio="0.5625" data-w="1920"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">大能量机关各区域的二值图</span></p><p style="text-align: left;margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-family: 宋体;font-size: 15px;">而在空中机器人读取基地区二维码的时候又用到了局部阈值方法：</span></p><p style="margin-top: 10px;margin-bottom: 5px;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372LcSA7gDAblBpibqR7m76pIXq30WbiaWH6saqdP5LibFqXP4cqduMZDxePeBKH24YbjkPED1Zjib1huiag.jpg" data-copyright="0" style="" class="" data-ratio="0.75" data-w="1280"></p><p style="text-align: center;margin-top: 5px;line-height: normal;margin-bottom: 20px;"><span style="font-family: 宋体;color: rgb(136, 136, 136);font-size: 14px;letter-spacing: 1px;">空中机器人识别基地</span></p><p style="text-align: left;margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 15px;letter-spacing: 1px;">今天所讲的内容只是图像分割的冰山一角，作为视觉领域最古老的问题之一，时至今日仍有非常多图像分割的新算法被提出。</span></p><p style="margin-top: 10px;margin-bottom: 15px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">除了基于阈值的图像分割方法外，常用的分割方法还可以基于边缘<span style="font-size: 15px;letter-spacing: 1px;color: gray;">（如</span></span><span style="font-size: 15px;letter-spacing: 1px;color: gray;">Yanowitz-Bruckstein</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: gray;">自适应阈值方法</span><span style="font-size: 15px;letter-spacing: 1px;color: gray;">[5]</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: gray;">）</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">、区域<span style="font-size: 15px;letter-spacing: 1px;color: gray;">（如区域生长算法</span></span><span style="font-size: 15px;letter-spacing: 1px;color: gray;">[6]</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;color: gray;">）</span><span style="font-size: 15px;letter-spacing: 1px;font-family: 宋体;">等，它们在卫星图像处理、交通控制系统、工业生产监控、医疗影像等领域发挥着巨大的作用。</span></span></p><p style="margin-top: 10px;margin-bottom: 5px;text-align: center;line-height: normal;"><img data-s="300,640" data-type="jpeg" data-src="/static/assets/img/mp-sync/uia5dweZ372Krw8pUcF1r5RyqV9o9kxj4VRnCzlibAbkS4Szjgia1pVjG0cQF9BELmjHUpZEIE1ezKoZHaoJXHIHA.jpg" data-copyright="0" class="" data-ratio="0.7493606138107417" data-w="391" style="text-align: center;"></p><p style="text-align: center;margin-top: 5px;margin-bottom: 20px;line-height: normal;"><span style="font-size: 14px;color: rgb(136, 136, 136);letter-spacing: 1px;">脑部组织图像分割</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 14px;font-family: 宋体;letter-spacing: 1px;"><br></span></p><p style="text-align: right;margin-bottom: 5px;margin-top: 5px;line-height: normal;"><span style="font-size: 14px;font-family: 宋体;color: rgb(136, 136, 136);letter-spacing: 0.5px;">策划 | 视觉组<br></span></p><p style="text-align: right;margin-bottom: 5px;margin-top: 5px;line-height: normal;"><span style="font-size: 14px;font-family: 宋体;color: rgb(136, 136, 136);letter-spacing: 0.5px;">图文 | 宣传组</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 14px;font-family: 宋体;letter-spacing: 1px;"><br></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-size: 15px;"><span style="letter-spacing: 1px;font-family: 宋体;">本文所述阈值方法的</span>OpenCV<span style="letter-spacing: 1px;font-family: 宋体;">实现，请访问：</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-size: 15px;color: rgb(0, 122, 170);text-decoration: none;letter-spacing: 1px;">https://docs.opencv.org/master/d7/d1b/group__imgproc__misc.html</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: 宋体;font-size: 14px;letter-spacing: 1px;"><br></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-family: 宋体;font-size: 15px;">参考文献</span><span style="letter-spacing: 1px;font-family: 宋体;font-size: 14px;"><br></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="letter-spacing: 1px;font-size: 14px;"><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);">[1] </span><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);background: white;">Spirkovska, L. (1993). A summary of image segmentation techniques.</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="letter-spacing: 1px;font-size: 14px;"><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);">[2] </span><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);background: white;">Nobuyuki Otsu (1979). "A threshold selection method from gray-level histograms". <em>IEEE Trans. Sys., Man., Cyber</em>. <strong>9</strong> (1):62–66.</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="font-family: Arial, sans-serif;color: rgb(34, 34, 34);letter-spacing: 1px;font-size: 14px;">[3] Ping-Sung Liao and Tse-Sheng Chen and Pau-Choo Chung (2001). "A Fast Algorithm for Multilevel Thresholding". <em>J. Inf. Sci. Eng</em>. <strong>17</strong> (5):713–727.</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="font-family: Arial, sans-serif;color: rgb(34, 34, 34);letter-spacing: 1px;font-size: 14px;">[4] Chow,C.K.; and Kaneko, T.: Boundary Detection of Radiographic Images by a Thresholding Method. Frontiers of Pattern Recognition, S. Watanabe, ed.,Academic Press, New York, 1972, pp. 61-82.</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="letter-spacing: 1px;font-size: 14px;"><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);">[5] </span><span style="letter-spacing: 1px;font-family: Arial, sans-serif;color: rgb(34, 34, 34);background: white;">Yanowitz, S. D., &amp; Bruckstein, A. M. (1988, November). A new method for image segmentation. In <em>Pattern Recognition, 1988., 9th International Conference on</em> (pp. 270-275). IEEE.</span></span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><span style="font-family: Arial, sans-serif;color: rgb(34, 34, 34);background: white;letter-spacing: 1px;font-size: 14px;">[6] Richardson H W. Regional growth theory[M]. Macmillan,1973.</span></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><br></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.5em;"><br></p><p style="margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;"><span style="font-family: Arial, sans-serif;color: rgb(34, 34, 34);background: white;font-size: 15px;letter-spacing: 1px;"></span></p><section class="" powered-by="xiumi.us" style="max-width: 100%;box-sizing: border-box;white-space: normal;color: rgb(62, 62, 62);font-size: 16px;line-height: 25.6px;background-color: rgb(255, 255, 255);word-wrap: break-word !important;"><p style="max-width: 100%;box-sizing: border-box;text-align: center;margin-top: 10px;margin-bottom: 10px;line-height: 1.75em;word-wrap: break-word !important;"><img class="" data-ratio="1" data-src="/static/assets/img/mp-sync/uia5dweZ372LocjVclKdf4WEw3g5Doy9OMTf5a34QdZksmVYd3WqadpiaEENCHUbm5XLHNKbAWibTBwEHvTv8qzNg.jpg" data-type="jpeg" data-w="640" style="box-sizing: border-box;vertical-align: middle;word-wrap: break-word !important;visibility: visible !important;width: auto !important;" width="auto"></p></section><p style="max-width: 100%;min-height: 1em;white-space: normal;color: rgb(62, 62, 62);font-size: 16px;background-color: rgb(255, 255, 255);text-align: center;margin-top: 10px;line-height: normal;margin-bottom: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><img class="" data-copyright="0" data-ratio="0.3328125" data-s="300,640" data-src="/static/assets/img/mp-sync/uia5dweZ372I0N3DzzDY1OAmbSictU9ib5R2qMDD6FCxZkVpQsJTl1EsricdDDh8kNfvzoictsxfbxbSHyGLW5XMJRA.jpg" data-type="jpeg" data-w="640" style="box-sizing: border-box !important;word-wrap: break-word !important;visibility: visible !important;width: auto !important;" width="auto"></p><p style="max-width: 100%;min-height: 1em;white-space: normal;color: rgb(62, 62, 62);font-size: 16px;background-color: rgb(255, 255, 255);text-align: center;margin-top: 10px;line-height: normal;margin-bottom: 15px;box-sizing: border-box !important;word-wrap: break-word !important;"><br></p><hr><p style="max-width: 100%;min-height: 1em;white-space: normal;color: rgb(62, 62, 62);font-size: 16px;background-color: rgb(255, 255, 255);text-align: left;margin-top: 10px;margin-bottom: 15px;line-height: normal;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(136, 136, 136);letter-spacing: 1px;font-size: 12px;">本文将由RM组委会修改完善之后，于本周日晚发表于RoboMaster公众号，敬请关注。</span></p><p style="max-width: 100%;min-height: 1em;white-space: normal;font-size: 16px;background-color: rgb(255, 255, 255);text-align: left;margin-top: 10px;margin-bottom: 15px;line-height: normal;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(136, 136, 136);letter-spacing: 1px;font-size: 12px;">想参加机器人比赛的同学，可关注由我校<strong>机器人协会</strong>*承办的RoboMaster校内赛，将有针对大一新生的入门教学培训。<span style="color: rgb(136, 136, 136);letter-spacing: 1px;background-color: rgb(255, 255, 255);font-size: 12px;">点击</span><span style="font-size: 12px;letter-spacing: 1px;background-color: rgb(255, 255, 255);color: rgb(0, 122, 170);">阅读原文</span>了解更多。</span></p><p style="max-width: 100%;min-height: 1em;white-space: normal;font-size: 16px;background-color: rgb(255, 255, 255);text-align: left;margin-top: 10px;margin-bottom: 15px;line-height: normal;box-sizing: border-box !important;word-wrap: break-word !important;"><span style="color: rgb(136, 136, 136);font-size: 12px;letter-spacing: normal;">*机器人协会为我实验室旗下学生组织<span style="letter-spacing: 1px;font-size: 12px;color: rgb(136, 136, 136);">。</span></span></p>